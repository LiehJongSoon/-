<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌïôÏÉùÏ£ºÎèÑÌòï ÏÜåÎ¶¨ ÌäπÏÑ± Ïã§ÌóòÏû•Ïπò ÍµêÏú° Ìö®Í≥º Î∂ÑÏÑù ÏãúÏä§ÌÖú</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #007bff;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #e9ecef;
            border: none;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .nav-tab.active {
            background: #007bff;
            color: white;
        }
        
        .nav-tab:hover:not(.active) {
            background: #dee2e6;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            min-height: 600px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #28a745;
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .input-row label {
            font-weight: bold;
            color: #495057;
            font-size: 14px;
        }
        
        .input-row input, .input-row select {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .input-row input:focus, .input-row select:focus {
            outline: none;
            border-color: #007bff;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #1e7e34;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 25px;
        }
        
        .result-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #007bff;
        }
        
        .result-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .stat-label {
            font-weight: bold;
            color: #6c757d;
        }
        
        .stat-value {
            font-weight: bold;
            color: #007bff;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .significance {
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .significant {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .not-significant {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .effect-size {
            padding: 8px 12px;
            border-radius: 15px;
            display: inline-block;
            margin: 5px;
            font-weight: bold;
        }
        
        .small-effect {
            background: #fff3cd;
            color: #856404;
        }
        
        .medium-effect {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .large-effect {
            background: #d4edda;
            color: #155724;
        }
        
        .student-count {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
            margin: 15px 0;
        }
        
        .export-section {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .data-table th,
        .data-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: center;
            font-size: 14px;
        }
        
        .data-table th {
            background: #007bff;
            color: white;
            font-weight: bold;
        }
        
        .data-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .grade-selector {
            margin: 20px 0;
        }
        
        .grade-selector label {
            display: inline-block;
            margin-right: 20px;
            font-size: 16px;
            font-weight: bold;
        }
        
        .grade-selector input[type="radio"] {
            margin-right: 8px;
        }
        
        .section-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            font-size: 18px;
            color: #007bff;
        }
        
        .loading.show {
            display: block;
        }
        
        .sample-data-btn {
            background: #17a2b8;
            color: white;
        }
        
        .sample-data-btn:hover {
            background: #138496;
        }
        
        .delete-btn {
            background: #6c757d;
            color: white;
            padding: 5px 10px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .delete-btn:hover {
            background: #545b62;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ ÌïôÏÉùÏ£ºÎèÑÌòï ÏÜåÎ¶¨ ÌäπÏÑ± Ïã§ÌóòÏû•Ïπò ÍµêÏú° Ìö®Í≥º Î∂ÑÏÑù ÏãúÏä§ÌÖú</h1>
            <p>ÏÇ¨Ï†Ñ-ÏÇ¨ÌõÑ ÏÑ§Î¨∏ Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†• Î∞è Ïã§ÏãúÍ∞Ñ ÌÜµÍ≥Ñ Î∂ÑÏÑù | 2022 Í∞úÏ†ï ÍµêÏú°Í≥ºÏ†ï Ïó∞Í≥Ñ</p>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('input')">üìù Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•</button>
            <button class="nav-tab" onclick="showTab('analysis')">üìä ÌÜµÍ≥Ñ Î∂ÑÏÑù</button>
            <button class="nav-tab" onclick="showTab('charts')">üìà ÏãúÍ∞ÅÌôî</button>
            <button class="nav-tab" onclick="showTab('report')">üìã Î≥¥Í≥†ÏÑú</button>
        </div>
        
        <!-- Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†• ÌÉ≠ -->
        <div id="input" class="tab-content active">
            <h2 class="section-title">üìù ÌïôÏÉù Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•</h2>
            
            <div class="alert alert-info">
                <strong>ÏûÖÎ†• ÏïàÎÇ¥:</strong> AÏòÅÏó≠(ÏßÄÏãù¬∑Ïù¥Ìï¥), BÏòÅÏó≠(Í≥ºÏ†ï¬∑Í∏∞Îä•), CÏòÅÏó≠(Í∞ÄÏπò¬∑ÌÉúÎèÑ), EÏòÅÏó≠(Ï≤¥ÌóòÌèâÍ∞Ä) Ï†êÏàòÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.<br>
                <strong>Ï¥à5:</strong> AÏòÅÏó≠(5Ï†ê), BÏòÅÏó≠(4Ï†ê) | <strong>Ï§ë2:</strong> AÏòÅÏó≠(6Ï†ê), BÏòÅÏó≠(5Ï†ê) | <strong>C,EÏòÅÏó≠:</strong> 1-5Ï†ê Ï≤ôÎèÑ
            </div>
            
            <div class="input-section">
                <h3>üéØ ÌïôÍ∏â ÏÑ†ÌÉù</h3>
                <div class="grade-selector">
                    <label>
                        <input type="radio" name="grade" value="elementary" checked onchange="updateInputHeaders()"> Ï¥àÎì±ÌïôÍµê 5ÌïôÎÖÑ
                    </label>
                    <label>
                        <input type="radio" name="grade" value="middle" onchange="updateInputHeaders()"> Ï§ëÌïôÍµê 2ÌïôÎÖÑ
                    </label>
                </div>
            </div>
            
            <div class="input-section">
                <h3>üìä ÌïôÏÉùÎ≥Ñ Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•</h3>
                <div class="input-row" id="input-header">
                    <label>ÌïôÏÉùÎ≤àÌò∏</label>
                    <label>ÏÑ±Î≥Ñ</label>
                    <label>AÏòÅÏó≠(ÏÇ¨Ï†Ñ)</label>
                    <label>AÏòÅÏó≠(ÏÇ¨ÌõÑ)</label>
                    <label>BÏòÅÏó≠(ÏÇ¨Ï†Ñ)</label>
                    <label>BÏòÅÏó≠(ÏÇ¨ÌõÑ)</label>
                    <label>CÏòÅÏó≠(ÏÇ¨Ï†Ñ)</label>
                    <label>CÏòÅÏó≠(ÏÇ¨ÌõÑ)</label>
                    <label>EÏòÅÏó≠(ÌèâÍ∑†)</label>
                </div>
                
                <div id="student-inputs">
                    <!-- ÌïôÏÉù ÏûÖÎ†• ÌèºÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="addStudent()">‚ûï ÌïôÏÉù Ï∂îÍ∞Ä</button>
<button class="btn btn-warning" onclick="uploadCSV()">üì§ CSV ÏóÖÎ°úÎìú</button>
<input type="file" id="csv-file-input" accept=".csv" style="display: none;" onchange="handleCSVFile(event)">
                    <button class="btn sample-data-btn" onclick="loadSampleData()">üìã ÏÉòÌîå Îç∞Ïù¥ÌÑ∞</button>
                    <button class="btn btn-success" onclick="calculateResults()">üîÑ Î∂ÑÏÑù Ïã§Ìñâ</button>
                    <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Ï†ÑÏ≤¥ ÏÇ≠Ï†ú</button>
                </div>
                
                <div class="student-count" id="student-count">ÏûÖÎ†•Îêú ÌïôÏÉù Ïàò: 0Î™Ö</div>
            </div>
        </div>
        
        <!-- ÌÜµÍ≥Ñ Î∂ÑÏÑù ÌÉ≠ -->
        <div id="analysis" class="tab-content">
            <h2 class="section-title">üìä ÌÜµÍ≥Ñ Î∂ÑÏÑù Í≤∞Í≥º</h2>
            
            <div class="alert alert-warning" id="analysis-warning">
                Î®ºÏ†Ä Îç∞Ïù¥ÌÑ∞Î•º ÏûÖÎ†•ÌïòÍ≥† Î∂ÑÏÑùÏùÑ Ïã§ÌñâÌï¥Ï£ºÏÑ∏Ïöî.
            </div>
            
            <div class="loading" id="analysis-loading">
                üîÑ Î∂ÑÏÑù Ï§ë... Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî.
            </div>
            
            <div class="results-grid" id="analysis-results" style="display: none;">
                <div class="result-card">
                    <h3>üéØ AÏòÅÏó≠: Í≥ºÌïô ÏßÄÏãù¬∑Ïù¥Ìï¥</h3>
                    <div id="area-a-stats"></div>
                    <div id="area-a-significance"></div>
                </div>
                
                <div class="result-card">
                    <h3>üî¨ BÏòÅÏó≠: Í≥ºÏ†ï¬∑Í∏∞Îä•</h3>
                    <div id="area-b-stats"></div>
                    <div id="area-b-significance"></div>
                </div>
                
                <div class="result-card">
                    <h3>‚ù§Ô∏è CÏòÅÏó≠: Í∞ÄÏπò¬∑ÌÉúÎèÑ</h3>
                    <div id="area-c-stats"></div>
                    <div id="area-c-significance"></div>
                </div>
                
                <div class="result-card">
                    <h3>‚ú® EÏòÅÏó≠: Ïã§Ìóò Ï≤¥Ìóò</h3>
                    <div id="area-e-stats"></div>
                    <div id="area-e-significance"></div>
                </div>
            </div>
            
            <div id="summary-stats" style="display: none;">
                <!-- Ï†ÑÏ≤¥ ÏöîÏïΩ ÌÜµÍ≥ÑÍ∞Ä Ïó¨Í∏∞ ÌëúÏãúÎê©ÎãàÎã§ -->
            </div>
        </div>
        
        <!-- ÏãúÍ∞ÅÌôî ÌÉ≠ -->
        <div id="charts" class="tab-content">
            <h2 class="section-title">üìà Îç∞Ïù¥ÌÑ∞ ÏãúÍ∞ÅÌôî</h2>
            
            <div class="alert alert-info">
                Î∂ÑÏÑù Ïã§Ìñâ ÌõÑ Í∑∏ÎûòÌîÑÍ∞Ä ÏÉùÏÑ±Îê©ÎãàÎã§. ÏÇ¨Ï†Ñ-ÏÇ¨ÌõÑ ÎπÑÍµê, Ìö®Í≥ºÌÅ¨Í∏∞, Í∞úÎ≥Ñ ÌïôÏÉù Î≥ÄÌôî Îì±ÏùÑ ÏãúÍ∞ÅÏ†ÅÏúºÎ°ú ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
            </div>
            
            <div class="chart-container">
                <canvas id="beforeAfterChart"></canvas>
            </div>
            
            <div class="chart-container">
                <canvas id="effectSizeChart"></canvas>
            </div>
            
            <div class="chart-container">
                <canvas id="individualChart"></canvas>
            </div>
        </div>
        
        <!-- Î≥¥Í≥†ÏÑú ÌÉ≠ -->
        <div id="report" class="tab-content">
            <h2 class="section-title">üìã Ïó∞Íµ¨ Î≥¥Í≥†ÏÑú</h2>
            
            <div class="export-section">
                <h3>üèÜ ÌïôÏÉùÏ£ºÎèÑÌòï ÏÜåÎ¶¨ ÌäπÏÑ± Ïã§ÌóòÏû•Ïπò ÍµêÏú°Ï†ÅÏö© Í≤∞Í≥º ÏöîÏïΩ</h3>
                <div id="report-content">
                    <div class="alert alert-warning">
                        Î∂ÑÏÑùÏùÑ Î®ºÏ†Ä Ïã§ÌñâÌï¥Ï£ºÏÑ∏Ïöî. Í∑∏Îü¨Î©¥ ÏûêÎèôÏúºÎ°ú Ïó∞Íµ¨ Î≥¥Í≥†ÏÑúÍ∞Ä ÏÉùÏÑ±Îê©ÎãàÎã§.
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="exportToCSV()">üìÑ CSV Îã§Ïö¥Î°úÎìú</button>
                    <button class="btn btn-primary" onclick="printReport()">üñ®Ô∏è Î≥¥Í≥†ÏÑú Ïù∏ÏáÑ</button>
                    <button class="btn sample-data-btn" onclick="copyResults()">üìã Í≤∞Í≥º Î≥µÏÇ¨</button>
                </div>
            </div>
            
            <div id="detailed-report" style="display: none;">
                <!-- ÏÉÅÏÑ∏ Î≥¥Í≥†ÏÑú ÎÇ¥Ïö©Ïù¥ Ïó¨Í∏∞ ÌëúÏãúÎê©ÎãàÎã§ -->
            </div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò ÏÑ†Ïñ∏ (Part 1ÏóêÏÑú Ï¥àÍ∏∞Ìôî)
        let studentData = [];
        let currentGrade = 'elementary';
        let analysisResults = {};
        let charts = {};

        // Í∏∞Î≥∏ ÌÉ≠ Ï†ÑÌôò Ìï®Ïàò (Part 1 ÏôÑÏÑ±)
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.nav-tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Part 1 ÌÖåÏä§Ìä∏ Ìï®Ïàò
        function testPart1() {
            console.log('Part 1 HTML+CSS Î°úÎìú ÏôÑÎ£å!');
            console.log('Ï†ÑÏó≠ Î≥ÄÏàò Ï¥àÍ∏∞Ìôî:', { studentData, currentGrade, analysisResults });
            
            // Í∏∞Î≥∏ UI ÏöîÏÜå ÌôïÏù∏
            const elements = {
                header: document.querySelector('.header'),
                navTabs: document.querySelectorAll('.nav-tab'),
                tabContents: document.querySelectorAll('.tab-content')
            };
            
            console.log('UI ÏöîÏÜå ÌôïÏù∏:', elements);
            return elements;
        }

        // Part 1 Î°úÎìú Ïãú ÏûêÎèô Ïã§Ìñâ
        document.addEventListener('DOMContentLoaded', function() {
            testPart1();
            console.log('üéØ Part 1 (HTML+CSS) Î°úÎìú ÏôÑÎ£å! Îã§Ïùå PartÎ•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî.');
        });
    </script>

  <script>
// ========================================
// Part 2: Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†• Í¥ÄÎ†® JavaScript Ìï®ÏàòÎì§
// ========================================

// ÌïôÍ∏â Î≥ÄÍ≤ΩÏãú ÏûÖÎ†• Ìó§Îçî ÏóÖÎç∞Ïù¥Ìä∏
function updateInputHeaders() {
    const grade = document.querySelector('input[name="grade"]:checked').value;
    currentGrade = grade;
    
    const headerRow = document.getElementById('input-header');
    if (grade === 'elementary') {
        headerRow.innerHTML = `
            <label>ÌïôÏÉùÎ≤àÌò∏</label>
            <label>ÏÑ±Î≥Ñ</label>
            <label>AÏòÅÏó≠(ÏÇ¨Ï†Ñ/5)</label>
            <label>AÏòÅÏó≠(ÏÇ¨ÌõÑ/5)</label>
            <label>BÏòÅÏó≠(ÏÇ¨Ï†Ñ/4)</label>
            <label>BÏòÅÏó≠(ÏÇ¨ÌõÑ/4)</label>
            <label>CÏòÅÏó≠(ÏÇ¨Ï†Ñ/5)</label>
            <label>CÏòÅÏó≠(ÏÇ¨ÌõÑ/5)</label>
            <label>EÏòÅÏó≠(ÌèâÍ∑†/5)</label>
        `;
    } else {
        headerRow.innerHTML = `
            <label>ÌïôÏÉùÎ≤àÌò∏</label>
            <label>ÏÑ±Î≥Ñ</label>
            <label>AÏòÅÏó≠(ÏÇ¨Ï†Ñ/6)</label>
            <label>AÏòÅÏó≠(ÏÇ¨ÌõÑ/6)</label>
            <label>BÏòÅÏó≠(ÏÇ¨Ï†Ñ/5)</label>
            <label>BÏòÅÏó≠(ÏÇ¨ÌõÑ/5)</label>
            <label>CÏòÅÏó≠(ÏÇ¨Ï†Ñ/5)</label>
            <label>CÏòÅÏó≠(ÏÇ¨ÌõÑ/5)</label>
            <label>EÏòÅÏó≠(ÌèâÍ∑†/5)</label>
        `;
    }
    
    // Í∏∞Ï°¥ ÌïôÏÉù Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
    studentData = [];
    document.getElementById('student-inputs').innerHTML = '';
    updateStudentCount();
    console.log(`ÌïôÍ∏â Î≥ÄÍ≤Ω: ${grade}`);
}

// ÌïôÏÉù Ï∂îÍ∞Ä Ìï®Ïàò
function addStudent() {
    const studentNum = studentData.length + 1;
    const inputContainer = document.getElementById('student-inputs');
    
    const studentRow = document.createElement('div');
    studentRow.className = 'input-row';
    studentRow.setAttribute('data-student-id', studentNum);
    
    const maxA = currentGrade === 'elementary' ? 5 : 6;
    const maxB = currentGrade === 'elementary' ? 4 : 5;
    
    studentRow.innerHTML = `
        <input type="text" value="${studentNum}" readonly>
        <select>
            <option value="M">ÎÇ®</option>
            <option value="F">Ïó¨</option>
        </select>
        <input type="number" min="0" max="${maxA}" step="1" placeholder="0">
        <input type="number" min="0" max="${maxA}" step="1" placeholder="0">
        <input type="number" min="0" max="${maxB}" step="1" placeholder="0">
        <input type="number" min="0" max="${maxB}" step="1" placeholder="0">
        <input type="number" min="1" max="5" step="0.1" placeholder="3.0">
        <input type="number" min="1" max="5" step="0.1" placeholder="3.0">
        <input type="number" min="1" max="5" step="0.1" placeholder="3.0">
        <button class="btn delete-btn" onclick="removeStudent(${studentNum})">‚ùå</button>
    `;
    
    inputContainer.appendChild(studentRow);
    studentData.push({ id: studentNum });
    updateStudentCount();
    console.log(`ÌïôÏÉù ${studentNum} Ï∂îÍ∞Ä ÏôÑÎ£å`);
}

// ÌïôÏÉù Ï†úÍ±∞ Ìï®Ïàò
function removeStudent(studentId) {
    const studentRow = document.querySelector(`[data-student-id="${studentId}"]`);
    if (studentRow && confirm(`ÌïôÏÉù ${studentId}Î≤àÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)) {
        studentRow.remove();
        studentData = studentData.filter(s => s.id !== studentId);
        updateStudentCount();
        console.log(`ÌïôÏÉù ${studentId} ÏÇ≠Ï†ú ÏôÑÎ£å`);
    }
}

// ÌïôÏÉù Ïàò ÏóÖÎç∞Ïù¥Ìä∏
function updateStudentCount() {
    const count = document.querySelectorAll('#student-inputs .input-row').length;
    document.getElementById('student-count').textContent = `ÏûÖÎ†•Îêú ÌïôÏÉù Ïàò: ${count}Î™Ö`;
}

// ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ìï®Ïàò
function loadSampleData() {
    if (confirm('ÏÉòÌîå Îç∞Ïù¥ÌÑ∞Î•º Î°úÎìúÌïòÏãúÍ≤†ÏäµÎãàÍπå? Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Îäî ÏÇ≠Ï†úÎê©ÎãàÎã§.')) {
        clearAllData();
        
        const sampleSize = currentGrade === 'elementary' ? 25 : 30;
        const maxA = currentGrade === 'elementary' ? 5 : 6;
        const maxB = currentGrade === 'elementary' ? 4 : 5;
        
        for (let i = 0; i < sampleSize; i++) {
            addStudent();
            
            // ÎßàÏßÄÎßâÏóê Ï∂îÍ∞ÄÎêú ÌïôÏÉù Ìñâ Ï∞æÍ∏∞
            const rows = document.querySelectorAll('#student-inputs .input-row');
            const lastRow = rows[rows.length - 1];
            const inputs = lastRow.querySelectorAll('input, select');
            
            // ÏÑ±Î≥Ñ ÎûúÎç§ ÏÑ§Ï†ï
            inputs[1].value = Math.random() > 0.5 ? 'M' : 'F';
            
            // AÏòÅÏó≠: ÏÇ¨Ï†Ñ 2-3Ï†ê, ÏÇ¨ÌõÑ 4-5Ï†ê (Í∞ïÌïú Í∞úÏÑ† Ìö®Í≥º)
            inputs[2].value = Math.floor(Math.random() * 2) + 2; // 2-3Ï†ê
            inputs[3].value = Math.floor(Math.random() * 2) + (maxA - 1); // 4-5Ï†ê ÎòêÎäî 5-6Ï†ê
            
            // BÏòÅÏó≠: ÏÇ¨Ï†Ñ 1-2Ï†ê, ÏÇ¨ÌõÑ 3-4Ï†ê (Îß§Ïö∞ Í∞ïÌïú Í∞úÏÑ† Ìö®Í≥º)
            inputs[4].value = Math.floor(Math.random() * 2) + 1; // 1-2Ï†ê
            inputs[5].value = Math.floor(Math.random() * 2) + (maxB - 1); // 3-4Ï†ê ÎòêÎäî 4-5Ï†ê
            
            // CÏòÅÏó≠: ÏÇ¨Ï†Ñ 2.5-3.5Ï†ê, ÏÇ¨ÌõÑ 3.5-4.5Ï†ê (Ï§ëÍ∞Ñ Í∞úÏÑ† Ìö®Í≥º)
            inputs[6].value = (Math.random() * 1 + 2.5).toFixed(1); // 2.5-3.5Ï†ê
            inputs[7].value = (Math.random() * 1 + 3.5).toFixed(1); // 3.5-4.5Ï†ê
            
            // EÏòÅÏó≠: 4.0-4.8Ï†ê (Îß§Ïö∞ Í∏çÏ†ïÏ†Å Ï≤¥Ìóò)
            inputs[8].value = (Math.random() * 0.8 + 4.0).toFixed(1); // 4.0-4.8Ï†ê
        }
        
        updateStudentCount();
        console.log(`ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏôÑÎ£å: ${sampleSize}Î™Ö`);
        
        // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÌõÑ ÏûêÎèô Î∂ÑÏÑù Ï†úÏïà
        if (confirm('ÏÉòÌîå Îç∞Ïù¥ÌÑ∞Í∞Ä Î°úÎìúÎêòÏóàÏäµÎãàÎã§. Î∞îÎ°ú Î∂ÑÏÑùÏùÑ Ïã§ÌñâÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
            calculateResults();
        }
    }
}

// Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú
function clearAllData() {
    if (studentData.length > 0 && !confirm('Ï†ïÎßêÎ°ú Î™®Îì† Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
        return;
    }
    
    studentData = [];
    document.getElementById('student-inputs').innerHTML = '';
    updateStudentCount();
    
    // Î∂ÑÏÑù Í≤∞Í≥ºÎèÑ Ï¥àÍ∏∞Ìôî
    analysisResults = {};
    document.getElementById('analysis-warning').style.display = 'block';
    document.getElementById('analysis-results').style.display = 'none';
    
    // Ï∞®Ìä∏ÎèÑ Ï¥àÍ∏∞Ìôî
    Object.keys(charts).forEach(key => {
        if (charts[key]) {
            charts[key].destroy();
            charts[key] = null;
        }
    });
    
    console.log('Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú ÏôÑÎ£å');
}

// Îç∞Ïù¥ÌÑ∞ ÏàòÏßë Ìï®Ïàò (Î∂ÑÏÑùÏóê ÏÇ¨Ïö©)
function collectData() {
    const rows = document.querySelectorAll('#student-inputs .input-row');
    const data = [];
    
    rows.forEach((row, index) => {
        const inputs = row.querySelectorAll('input, select');
        
        // Îπà Í∞í Ï≤¥ÌÅ¨
        const values = {
            id: inputs[0].value || `ÌïôÏÉù${index + 1}`,
            gender: inputs[1].value || 'M',
            a_pre: parseFloat(inputs[2].value) || 0,
            a_post: parseFloat(inputs[3].value) || 0,
            b_pre: parseFloat(inputs[4].value) || 0,
            b_post: parseFloat(inputs[5].value) || 0,
            c_pre: parseFloat(inputs[6].value) || 0,
            c_post: parseFloat(inputs[7].value) || 0,
            e_avg: parseFloat(inputs[8].value) || 0
        };
        
        data.push(values);
    });
    
    console.log('Îç∞Ïù¥ÌÑ∞ ÏàòÏßë ÏôÑÎ£å:', data.length + 'Î™Ö');
    return data;
}

// Îç∞Ïù¥ÌÑ∞ Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù Ìï®Ïàò
function validateData(data) {
    const errors = [];
    const maxA = currentGrade === 'elementary' ? 5 : 6;
    const maxB = currentGrade === 'elementary' ? 4 : 5;
    
    data.forEach((student, index) => {
        const studentNum = index + 1;
        
        // AÏòÅÏó≠ Î≤îÏúÑ Ï≤¥ÌÅ¨
        if (student.a_pre < 0 || student.a_pre > maxA) {
            errors.push(`ÌïôÏÉù ${studentNum}: AÏòÅÏó≠ ÏÇ¨Ï†ÑÏ†êÏàò Î≤îÏúÑ Ïò§Î•ò (0-${maxA}Ï†ê)`);
        }
        if (student.a_post < 0 || student.a_post > maxA) {
            errors.push(`ÌïôÏÉù ${studentNum}: AÏòÅÏó≠ ÏÇ¨ÌõÑÏ†êÏàò Î≤îÏúÑ Ïò§Î•ò (0-${maxA}Ï†ê)`);
        }
        
        // BÏòÅÏó≠ Î≤îÏúÑ Ï≤¥ÌÅ¨
        if (student.b_pre < 0 || student.b_pre > maxB) {
            errors.push(`ÌïôÏÉù ${studentNum}: BÏòÅÏó≠ ÏÇ¨Ï†ÑÏ†êÏàò Î≤îÏúÑ Ïò§Î•ò (0-${maxB}Ï†ê)`);
        }
        if (student.b_post < 0 || student.b_post > maxB) {
            errors.push(`ÌïôÏÉù ${studentNum}: BÏòÅÏó≠ ÏÇ¨ÌõÑÏ†êÏàò Î≤îÏúÑ Ïò§Î•ò (0-${maxB}Ï†ê)`);
        }
        
        // CÏòÅÏó≠, EÏòÅÏó≠ Î≤îÏúÑ Ï≤¥ÌÅ¨ (1-5Ï†ê)
        if (student.c_pre < 1 || student.c_pre > 5) {
            errors.push(`ÌïôÏÉù ${studentNum}: CÏòÅÏó≠ ÏÇ¨Ï†ÑÏ†êÏàò Î≤îÏúÑ Ïò§Î•ò (1-5Ï†ê)`);
        }
        if (student.c_post < 1 || student.c_post > 5) {
            errors.push(`ÌïôÏÉù ${studentNum}: CÏòÅÏó≠ ÏÇ¨ÌõÑÏ†êÏàò Î≤îÏúÑ Ïò§Î•ò (1-5Ï†ê)`);
        }
        if (student.e_avg < 1 || student.e_avg > 5) {
            errors.push(`ÌïôÏÉù ${studentNum}: EÏòÅÏó≠ ÌèâÍ∑†Ï†êÏàò Î≤îÏúÑ Ïò§Î•ò (1-5Ï†ê)`);
        }
        
        // Îπà Í∞í Ï≤¥ÌÅ¨
        if (student.a_pre === 0 && student.a_post === 0) {
            errors.push(`ÌïôÏÉù ${studentNum}: AÏòÅÏó≠ Ï†êÏàòÍ∞Ä Î™®Îëê 0ÏûÖÎãàÎã§`);
        }
    });
    
    if (errors.length > 0) {
        console.error('Îç∞Ïù¥ÌÑ∞ Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù Ïã§Ìå®:', errors);
        alert('Îç∞Ïù¥ÌÑ∞ Ïò§Î•òÍ∞Ä Î∞úÍ≤¨ÎêòÏóàÏäµÎãàÎã§:\n' + errors.slice(0, 5).join('\n') + 
              (errors.length > 5 ? '\n... Îì± ' + errors.length + 'Í∞ú Ïò§Î•ò' : ''));
        return false;
    }
    
    console.log('Îç∞Ïù¥ÌÑ∞ Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù ÌÜµÍ≥º');
    return true;
}

// Part 2 ÌÖåÏä§Ìä∏ Ìï®Ïàò
function testPart2() {
    console.log('üéØ Part 2 (Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•) Ìï®ÏàòÎì§ Î°úÎìú ÏôÑÎ£å!');
    
    // Ìï®Ïàò Ï°¥Ïû¨ ÌôïÏù∏
    const functions = {
        updateInputHeaders: typeof updateInputHeaders,
        addStudent: typeof addStudent,
        removeStudent: typeof removeStudent,
        loadSampleData: typeof loadSampleData,
        clearAllData: typeof clearAllData,
        collectData: typeof collectData,
        validateData: typeof validateData
    };
    
    console.log('Part 2 Ìï®Ïàò ÌôïÏù∏:', functions);
    
    // Ï¥àÍ∏∞ ÏÉÅÌÉú ÏÑ§Ï†ï
    updateInputHeaders();
    
    return functions;
}

// Part 2 Î°úÎìú ÏôÑÎ£å Ïãú ÏûêÎèô Ïã§Ìñâ
if (typeof document !== 'undefined') {
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof testPart2 === 'function') {
            testPart2();
        }
    });
}
// CSV ÏóÖÎ°úÎìú Ìï®ÏàòÎì§
function uploadCSV() {
    document.getElementById('csv-file-input').click();
}

function handleCSVFile(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            parseCSV(e.target.result);
        };
        reader.readAsText(file);
    }
}

function parseCSV(csvText) {
    const lines = csvText.split('\n');
    const headers = lines[0].split(',');
    
    clearAllData();
    
    for (let i = 1; i < lines.length; i++) {
        if (lines[i].trim()) {
            const values = lines[i].split(',');
            addStudent();
            
            const rows = document.querySelectorAll('#student-inputs .input-row');
            const lastRow = rows[rows.length - 1];
            const inputs = lastRow.querySelectorAll('input, select');
            
            // CSV Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•
            if (values.length >= 9) {
                inputs[1].value = values[1] || 'M';
                inputs[2].value = values[2] || '0';
                inputs[3].value = values[3] || '0';
                inputs[4].value = values[4] || '0';
                inputs[5].value = values[5] || '0';
                inputs[6].value = values[6] || '0';
                inputs[7].value = values[7] || '0';
                inputs[8].value = values[8] || '0';
            }
        }
    }
    
    updateStudentCount();
    alert('CSV ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§!');
}
console.log('üìù Part 2 JavaScript Î°úÎìú ÏôÑÎ£å!');
</script>

<script>
// ========================================
// Part 3: ÌÜµÍ≥Ñ Î∂ÑÏÑù Í¥ÄÎ†® JavaScript Ìï®ÏàòÎì§
// ========================================

// Í∏∞Î≥∏ ÌÜµÍ≥Ñ Ìï®ÏàòÎì§
function calculateMean(arr) {
    if (arr.length === 0) return 0;
    return arr.reduce((sum, val) => sum + val, 0) / arr.length;
}

function calculateSD(arr) {
    if (arr.length === 0) return 0;
    const mean = calculateMean(arr);
    const squaredDiffs = arr.map(val => Math.pow(val - mean, 2));
    return Math.sqrt(calculateMean(squaredDiffs));
}

function calculateSEM(arr) {
    if (arr.length === 0) return 0;
    return calculateSD(arr) / Math.sqrt(arr.length);
}

// ÎåÄÏùëÌëúÎ≥∏ t-Í≤ÄÏ†ï Ìï®Ïàò
function pairedTTest(pre, post) {
    const n = pre.length;
    if (n === 0) return null;
    
    const diff = pre.map((p, i) => post[i] - p);
    const meanDiff = calculateMean(diff);
    const sdDiff = calculateSD(diff);
    const semDiff = sdDiff / Math.sqrt(n);
    
    const tStat = meanDiff / semDiff;
    const df = n - 1;
    
    // t Î∂ÑÌè¨ ÏûÑÍ≥ÑÍ∞í (Í∑ºÏÇ¨Ïπò)
    const tCritical = getTCritical(df);
    const pValue = calculatePValue(Math.abs(tStat), df);
    
    return {
        n: n,
        meanDiff: meanDiff,
        sdDiff: sdDiff,
        semDiff: semDiff,
        tStat: tStat,
        df: df,
        pValue: pValue,
        significant: pValue < 0.05,
        tCritical: tCritical
    };
}

// t Î∂ÑÌè¨ ÏûÑÍ≥ÑÍ∞í Í≥ÑÏÇ∞ (Í∑ºÏÇ¨Ïπò)
function getTCritical(df) {
    // Œ± = 0.05, Îã®Ï∏°Í≤ÄÏ†ï Í∏∞Ï§Ä
    const tTable = {
        1: 6.314, 5: 2.015, 10: 1.812, 15: 1.753, 20: 1.725,
        25: 1.708, 30: 1.697, 40: 1.684, 60: 1.671, 100: 1.660, 1000: 1.645
    };
    
    // Í∞ÄÏû• Í∞ÄÍπåÏö¥ df Ï∞æÍ∏∞
    const keys = Object.keys(tTable).map(Number).sort((a, b) => a - b);
    for (let i = 0; i < keys.length; i++) {
        if (df <= keys[i]) return tTable[keys[i]];
    }
    return 1.645; // Î¨¥ÌïúÎåÄ Í∑ºÏÇ¨
}

// pÍ∞í Í≥ÑÏÇ∞ (Í∑ºÏÇ¨Ïπò)
function calculatePValue(tAbs, df) {
    // Í∞ÑÎã®Ìïú Í∑ºÏÇ¨ Í≥µÏãù ÏÇ¨Ïö©
    if (df < 1) return 1;
    
    const tCrit_05 = getTCritical(df);
    const tCrit_01 = tCrit_05 * 1.3; // ÎåÄÎûµÏ†Å ÎπÑÏú®
    const tCrit_001 = tCrit_05 * 1.6;
    
    if (tAbs >= tCrit_001) return 0.001;
    else if (tAbs >= tCrit_01) return 0.01;
    else if (tAbs >= tCrit_05) return 0.05;
    else return 0.1; // Ïú†ÏùòÌïòÏßÄ ÏïäÏùå
}

// Cohen's d Ìö®Í≥ºÌÅ¨Í∏∞ Í≥ÑÏÇ∞
function calculateCohenD(pre, post) {
    if (pre.length === 0) return 0;
    
    const preMean = calculateMean(pre);
    const postMean = calculateMean(post);
    const meanDiff = postMean - preMean;
    
    const preSD = calculateSD(pre);
    const postSD = calculateSD(post);
    const pooledSD = Math.sqrt((Math.pow(preSD, 2) + Math.pow(postSD, 2)) / 2);
    
    return pooledSD > 0 ? meanDiff / pooledSD : 0;
}

// Ìö®Í≥ºÌÅ¨Í∏∞ Ìï¥ÏÑù Ìï®Ïàò
function interpretEffectSize(d) {
    const absD = Math.abs(d);
    if (absD >= 0.8) return { label: 'ÌÅ∞ Ìö®Í≥º', class: 'large-effect', color: '#28a745' };
    else if (absD >= 0.5) return { label: 'Ï§ëÍ∞Ñ Ìö®Í≥º', class: 'medium-effect', color: '#17a2b8' };
    else if (absD >= 0.2) return { label: 'ÏûëÏùÄ Ìö®Í≥º', class: 'small-effect', color: '#ffc107' };
    else return { label: 'Ìö®Í≥º ÏóÜÏùå', class: 'no-effect', color: '#6c757d' };
}

// ÏùºÌëúÎ≥∏ t-Í≤ÄÏ†ï (EÏòÅÏó≠Ïö©)
function oneSampleTTest(data, testValue = 3.0) {
    const n = data.length;
    if (n === 0) return null;
    
    const mean = calculateMean(data);
    const sd = calculateSD(data);
    const sem = sd / Math.sqrt(n);
    const tStat = (mean - testValue) / sem;
    const df = n - 1;
    const pValue = calculatePValue(Math.abs(tStat), df);
    
    return {
        n: n,
        mean: mean,
        sd: sd,
        sem: sem,
        testValue: testValue,
        tStat: tStat,
        df: df,
        pValue: pValue,
        significant: pValue < 0.05,
        aboveNeutral: mean > testValue
    };
}

// Î©îÏù∏ Î∂ÑÏÑù Ïã§Ìñâ Ìï®Ïàò
function calculateResults() {
    // Î°úÎî© ÌëúÏãú
    document.getElementById('analysis-loading').classList.add('show');
    document.getElementById('analysis-warning').style.display = 'none';
    
    setTimeout(() => {
        try {
            const data = collectData();
            
            if (data.length === 0) {
                alert('ÏûÖÎ†•Îêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§. Î®ºÏ†Ä ÌïôÏÉù Îç∞Ïù¥ÌÑ∞Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                document.getElementById('analysis-loading').classList.remove('show');
                document.getElementById('analysis-warning').style.display = 'block';
                return;
            }
            
            if (!validateData(data)) {
                document.getElementById('analysis-loading').classList.remove('show');
                document.getElementById('analysis-warning').style.display = 'block';
                return;
            }
            
            // Í∞Å ÏòÅÏó≠Î≥Ñ Îç∞Ïù¥ÌÑ∞ Ï∂îÏ∂ú
            const areas = {
                a: {
                    pre: data.map(d => d.a_pre),
                    post: data.map(d => d.a_post)
                },
                b: {
                    pre: data.map(d => d.b_pre),
                    post: data.map(d => d.b_post)
                },
                c: {
                    pre: data.map(d => d.c_pre),
                    post: data.map(d => d.c_post)
                },
                e: {
                    data: data.map(d => d.e_avg)
                }
            };
            
            // Í∞Å ÏòÅÏó≠Î≥Ñ Î∂ÑÏÑù Ïã§Ìñâ
            analysisResults = {};
            
            // A, B, C ÏòÅÏó≠: ÎåÄÏùëÌëúÎ≥∏ t-Í≤ÄÏ†ï
            ['a', 'b', 'c'].forEach(area => {
                const tTest = pairedTTest(areas[area].pre, areas[area].post);
                const cohenD = calculateCohenD(areas[area].pre, areas[area].post);
                
                analysisResults[area] = {
                    pre_mean: calculateMean(areas[area].pre),
                    pre_sd: calculateSD(areas[area].pre),
                    post_mean: calculateMean(areas[area].post),
                    post_sd: calculateSD(areas[area].post),
                    improvement: calculateMean(areas[area].post) - calculateMean(areas[area].pre),
                    improvementPercent: ((calculateMean(areas[area].post) - calculateMean(areas[area].pre)) / 
                                       (currentGrade === 'elementary' ? (area === 'b' ? 4 : 5) : (area === 'a' ? 6 : 5)) * 100),
                    tTest: tTest,
                    cohenD: cohenD,
                    effectSize: interpretEffectSize(cohenD),
                    n: data.length
                };
            });
            
            // EÏòÅÏó≠: ÏùºÌëúÎ≥∏ t-Í≤ÄÏ†ï
            const eTest = oneSampleTTest(areas.e.data, 3.0);
            analysisResults.e = {
                mean: calculateMean(areas.e.data),
                sd: calculateSD(areas.e.data),
                oneSampleTest: eTest,
                n: data.length
            };
            
            // Í≤∞Í≥º ÌëúÏãú
            displayAnalysisResults();
            
            // Ï∞®Ìä∏ ÏÉùÏÑ± (Part 4ÏóêÏÑú Íµ¨ÌòÑ)
            if (typeof createCharts === 'function') {
                createCharts();
            }
            
            // Î≥¥Í≥†ÏÑú ÏÉùÏÑ± (Part 4ÏóêÏÑú Íµ¨ÌòÑ)
            if (typeof generateReport === 'function') {
                generateReport();
            }
            
            console.log('Î∂ÑÏÑù ÏôÑÎ£å:', analysisResults);
            
        } catch (error) {
            console.error('Î∂ÑÏÑù Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
            alert('Î∂ÑÏÑù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ' + error.message);
        } finally {
            document.getElementById('analysis-loading').classList.remove('show');
        }
    }, 500); // Î°úÎî© Ìö®Í≥ºÎ•º ÏúÑÌïú ÏßÄÏó∞
}

// Î∂ÑÏÑù Í≤∞Í≥º ÌëúÏãú Ìï®Ïàò
function displayAnalysisResults() {
    document.getElementById('analysis-results').style.display = 'grid';
    
    // A, B, C ÏòÅÏó≠ Í≤∞Í≥º ÌëúÏãú
    ['a', 'b', 'c'].forEach(area => {
        const result = analysisResults[area];
        const statsDiv = document.getElementById(`area-${area}-stats`);
        const sigDiv = document.getElementById(`area-${area}-significance`);
        
        // Í∏∞Î≥∏ ÌÜµÍ≥Ñ
        statsDiv.innerHTML = `
            <div class="stat-item">
                <span class="stat-label">ÌëúÎ≥∏ ÌÅ¨Í∏∞:</span>
                <span class="stat-value">${result.n}Î™Ö</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">ÏÇ¨Ï†Ñ ÌèâÍ∑†:</span>
                <span class="stat-value">${result.pre_mean.toFixed(2)} ¬± ${result.pre_sd.toFixed(2)}</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">ÏÇ¨ÌõÑ ÌèâÍ∑†:</span>
                <span class="stat-value">${result.post_mean.toFixed(2)} ¬± ${result.post_sd.toFixed(2)}</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Ìñ•ÏÉÅÎèÑ:</span>
                <span class="stat-value">+${result.improvement.toFixed(2)}Ï†ê (${result.improvementPercent.toFixed(1)}%)</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">tÍ∞í:</span>
                <span class="stat-value">${result.tTest.tStat.toFixed(3)} (df=${result.tTest.df})</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">pÍ∞í:</span>
                <span class="stat-value">${result.tTest.pValue < 0.001 ? '<0.001' : result.tTest.pValue.toFixed(3)}</span>
            </div>
        `;
        
        // Ïú†ÏùòÏÑ± Î∞è Ìö®Í≥ºÌÅ¨Í∏∞
        sigDiv.innerHTML = `
            <div class="${result.tTest.significant ? 'significance significant' : 'significance not-significant'}">
                ${result.tTest.significant ? 
                  `ÌÜµÍ≥ÑÏ†ÅÏúºÎ°ú Ïú†ÏùòÌï® ‚úÖ (p ${result.tTest.pValue < 0.001 ? '<0.001' : '='+result.tTest.pValue.toFixed(3)})` : 
                  'ÌÜµÍ≥ÑÏ†ÅÏúºÎ°ú Ïú†ÏùòÌïòÏßÄ ÏïäÏùå ‚ùå'}
            </div>
            <div class="effect-size ${result.effectSize.class}">
                Ìö®Í≥ºÌÅ¨Í∏∞: d = ${result.cohenD.toFixed(3)} (${result.effectSize.label})
            </div>
                 `;
    });
    
    // EÏòÅÏó≠ Í≤∞Í≥º ÌëúÏãú
    const eResult = analysisResults.e;
    document.getElementById('area-e-stats').innerHTML = `
        <div class="stat-item">
            <span class="stat-label">ÌëúÎ≥∏ ÌÅ¨Í∏∞:</span>
            <span class="stat-value">${eResult.n}Î™Ö</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">ÌèâÍ∑† Ï†êÏàò:</span>
            <span class="stat-value">${eResult.mean.toFixed(2)} ¬± ${eResult.sd.toFixed(2)}</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">5Ï†ê ÎßåÏ†ê ÌôòÏÇ∞:</span>
            <span class="stat-value">${eResult.mean.toFixed(1)}/5.0Ï†ê</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Î≥¥ÌÜµ(3.0)Í≥º ÎπÑÍµê:</span>
            <span class="stat-value">+${(eResult.mean - 3.0).toFixed(2)}Ï†ê</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">tÍ∞í:</span>
            <span class="stat-value">${eResult.oneSampleTest.tStat.toFixed(3)}</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">pÍ∞í:</span>
            <span class="stat-value">${eResult.oneSampleTest.pValue < 0.001 ? '<0.001' : eResult.oneSampleTest.pValue.toFixed(3)}</span>
        </div>
    `;
    
    document.getElementById('area-e-significance').innerHTML = `
        <div class="${eResult.oneSampleTest.significant && eResult.oneSampleTest.aboveNeutral ? 
                    'significance significant' : 'significance not-significant'}">
            ${eResult.oneSampleTest.significant && eResult.oneSampleTest.aboveNeutral ? 
              'Ïã§Ìóò Ï≤¥Ìóò Îß§Ïö∞ Í∏çÏ†ïÏ†Å! ‚ú®' : 'Ïã§Ìóò Ï≤¥Ìóò Î≥¥ÌÜµ ÏàòÏ§Ä'}
        </div>
        ${eResult.mean >= 4.0 ? 
          '<div class="alert alert-success" style="margin-top: 10px; padding: 8px;">üåü Îß§Ïö∞ ÎÜíÏùÄ ÎßåÏ°±ÎèÑ!</div>' : ''}
    `;
    
    // Ï†ÑÏ≤¥ ÏöîÏïΩ ÌëúÏãú
    displaySummaryStats();
}

// Ï†ÑÏ≤¥ ÏöîÏïΩ ÌÜµÍ≥Ñ ÌëúÏãú
function displaySummaryStats() {
    const summaryDiv = document.getElementById('summary-stats');
    if (!summaryDiv) return;
    
    const significantAreas = ['a', 'b', 'c'].filter(area => 
        analysisResults[area].tTest.significant && analysisResults[area].cohenD > 0
    );
    
    const largeEffects = ['a', 'b', 'c'].filter(area => 
        Math.abs(analysisResults[area].cohenD) >= 0.8
    );
    
    const avgImprovement = ['a', 'b', 'c'].reduce((sum, area) => 
        sum + analysisResults[area].improvementPercent, 0) / 3;
    
    summaryDiv.innerHTML = `
        <div class="result-card" style="grid-column: 1 / -1; border-left-color: #28a745;">
            <h3>üéØ Ï†ÑÏ≤¥ Ïó∞Íµ¨ ÏöîÏïΩ</h3>
            <div class="stat-item">
                <span class="stat-label">Î∂ÑÏÑù ÎåÄÏÉÅ:</span>
                <span class="stat-value">${analysisResults.a.n}Î™Ö (${currentGrade === 'elementary' ? 'Ï¥àÎì± 5ÌïôÎÖÑ' : 'Ï§ëÌïôÍµê 2ÌïôÎÖÑ'})</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Ïú†ÏùòÌïú Ìö®Í≥º:</span>
                <span class="stat-value">${significantAreas.length}/3Í∞ú ÏòÅÏó≠</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">ÌÅ∞ Ìö®Í≥ºÌÅ¨Í∏∞:</span>
                <span class="stat-value">${largeEffects.length}/3Í∞ú ÏòÅÏó≠</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">ÌèâÍ∑† Ìñ•ÏÉÅÎ•†:</span>
                <span class="stat-value">${avgImprovement.toFixed(1)}%</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Ï≤¥Ìóò ÎßåÏ°±ÎèÑ:</span>
                <span class="stat-value">${analysisResults.e.mean.toFixed(1)}/5.0Ï†ê</span>
            </div>
     ${significantAreas.length >= 2 && largeEffects.length >= 2 ? 
              '<div class="alert alert-success" style="margin-top: 15px;">üî¨ Í≥ºÌïôÍµêÏú° Í∞úÏÑ†Ïóê Í∏∞Ïó¨Ìï† Ïàò ÏûàÎäî Í≤∞Í≥º!</div>' :
              significantAreas.length >= 2 && largeEffects.length >= 1 ?
              '<div class="alert alert-success" style="margin-top: 15px;">‚ú® Ïã§Ï†ú ÍµêÏú°ÌòÑÏû• Ï†ÅÏö© Í∞ÄÎä•Ìïú Í≤∞Í≥º!</div>' : ''}
        </div>
    `;
    
    summaryDiv.style.display = 'block';
}

// Í∞úÎ≥Ñ ÌïôÏÉù Î∂ÑÏÑù Ìï®Ïàò
function analyzeIndividualStudents() {
    const data = collectData();
    const improvements = data.map(student => ({
        id: student.id,
        a_improvement: student.a_post - student.a_pre,
        b_improvement: student.b_post - student.b_pre,
        c_improvement: student.c_post - student.c_pre,
        total_improvement: (student.a_post - student.a_pre) + (student.b_post - student.b_pre) + (student.c_post - student.c_pre),
        e_score: student.e_avg
    }));
    
    return improvements;
}

// Part 3 ÌÖåÏä§Ìä∏ Ìï®Ïàò
function testPart3() {
    console.log('üéØ Part 3 (ÌÜµÍ≥Ñ Î∂ÑÏÑù) Ìï®ÏàòÎì§ Î°úÎìú ÏôÑÎ£å!');
    
    const functions = {
        calculateMean: typeof calculateMean,
        calculateSD: typeof calculateSD,
        pairedTTest: typeof pairedTTest,
        calculateCohenD: typeof calculateCohenD,
        oneSampleTTest: typeof oneSampleTTest,
        calculateResults: typeof calculateResults,
        displayAnalysisResults: typeof displayAnalysisResults
    };
    
    console.log('Part 3 Ìï®Ïàò ÌôïÏù∏:', functions);
    
    // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞Î°ú ÌÖåÏä§Ìä∏
    const testData = [1, 2, 3, 4, 5];
    console.log('ÌÖåÏä§Ìä∏ - ÌèâÍ∑†:', calculateMean(testData));
    console.log('ÌÖåÏä§Ìä∏ - ÌëúÏ§ÄÌé∏Ï∞®:', calculateSD(testData));
    
    return functions;
}

// Part 3 Î°úÎìú ÏôÑÎ£å Ïãú ÏûêÎèô Ïã§Ìñâ
if (typeof document !== 'undefined') {
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof testPart3 === 'function') {
            testPart3();
        }
    });
}

console.log('üìä Part 3 JavaScript Î°úÎìú ÏôÑÎ£å!');
</script>

<script>
// ========================================
// Part 4A: Ï∞®Ìä∏ ÏÉùÏÑ± Í¥ÄÎ†® JavaScript Ìï®ÏàòÎì§
// ========================================

// Ï∞®Ìä∏ ÏÉùÏÑ± Î©îÏù∏ Ìï®Ïàò
function createCharts() {
    if (!analysisResults || Object.keys(analysisResults).length === 0) {
        console.warn('Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§. Î®ºÏ†Ä Î∂ÑÏÑùÏùÑ Ïã§ÌñâÌï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }
    
    // Í∏∞Ï°¥ Ï∞®Ìä∏ ÏÇ≠Ï†ú
    destroyExistingCharts();
    
    // Í∞Å Ï∞®Ìä∏ ÏÉùÏÑ±
    createBeforeAfterChart();
    createEffectSizeChart();
    createIndividualChangeChart();
    
    console.log('Î™®Îì† Ï∞®Ìä∏ ÏÉùÏÑ± ÏôÑÎ£å');
}

// Í∏∞Ï°¥ Ï∞®Ìä∏ ÏÇ≠Ï†ú Ìï®Ïàò
function destroyExistingCharts() {
    Object.keys(charts).forEach(key => {
        if (charts[key] && typeof charts[key].destroy === 'function') {
            charts[key].destroy();
            charts[key] = null;
        }
    });
}

// ÏÇ¨Ï†Ñ-ÏÇ¨ÌõÑ ÎπÑÍµê Ï∞®Ìä∏
function createBeforeAfterChart() {
    const ctx = document.getElementById('beforeAfterChart');
    if (!ctx) return;
    
    const areas = ['a', 'b', 'c'];
    const areaNames = ['AÏòÅÏó≠ (ÏßÄÏãù¬∑Ïù¥Ìï¥)', 'BÏòÅÏó≠ (Í≥ºÏ†ï¬∑Í∏∞Îä•)', 'CÏòÅÏó≠ (Í∞ÄÏπò¬∑ÌÉúÎèÑ)'];
    
    const preData = areas.map(area => analysisResults[area].pre_mean);
    const postData = areas.map(area => analysisResults[area].post_mean);
    const maxScore = currentGrade === 'elementary' ? 5 : 6;
    
    charts.beforeAfter = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: areaNames,
            datasets: [
                {
                    label: 'ÏÇ¨Ï†Ñ Ï†êÏàò',
                    data: preData,
                    backgroundColor: 'rgba(54, 162, 235, 0.7)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2,
                    borderRadius: 5
                },
                {
                    label: 'ÏÇ¨ÌõÑ Ï†êÏàò',
                    data: postData,
                    backgroundColor: 'rgba(75, 192, 192, 0.7)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 2,
                    borderRadius: 5
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: `ÏÇ¨Ï†Ñ-ÏÇ¨ÌõÑ Ï†êÏàò ÎπÑÍµê (${currentGrade === 'elementary' ? 'Ï¥àÎì± 5ÌïôÎÖÑ' : 'Ï§ëÌïôÍµê 2ÌïôÎÖÑ'})`,
                    font: { size: 18, weight: 'bold' },
                    padding: 20
                },
                legend: {
                    position: 'top',
                    labels: { font: { size: 14 } }
                },
                tooltip: {
                    callbacks: {
                        afterLabel: function(context) {
                            const areaIndex = context.dataIndex;
                            const area = areas[areaIndex];
                            const improvement = analysisResults[area].improvement;
                            const percent = analysisResults[area].improvementPercent;
                            return `Ìñ•ÏÉÅ: +${improvement.toFixed(2)}Ï†ê (${percent.toFixed(1)}%)`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    max: maxScore,
                    title: {
                        display: true,
                        text: 'Ï†êÏàò',
                        font: { size: 14, weight: 'bold' }
                    },
                    grid: { color: 'rgba(0,0,0,0.1)' }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Ï∏°Ï†ï ÏòÅÏó≠',
                        font: { size: 14, weight: 'bold' }
                    }
                }
            },
            animation: {
                duration: 1500,
                easing: 'easeInOutQuart'
            }
        }
    });
}

// Ìö®Í≥ºÌÅ¨Í∏∞ Ï∞®Ìä∏
function createEffectSizeChart() {
    const ctx = document.getElementById('effectSizeChart');
    if (!ctx) return;
    
    const areas = ['a', 'b', 'c'];
    const areaNames = ['AÏòÅÏó≠', 'BÏòÅÏó≠', 'CÏòÅÏó≠'];
    const effectSizes = areas.map(area => analysisResults[area].cohenD);
    
    // Ìö®Í≥ºÌÅ¨Í∏∞Ïóê Îî∞Î•∏ ÏÉâÏÉÅ Í≤∞Ï†ï
    const colors = effectSizes.map(d => {
        const absD = Math.abs(d);
        if (absD >= 0.8) return 'rgba(40, 167, 69, 0.8)';      // ÌÅ∞ Ìö®Í≥º - Ï¥àÎ°ù
        else if (absD >= 0.5) return 'rgba(23, 162, 184, 0.8)'; // Ï§ëÍ∞Ñ Ìö®Í≥º - ÌååÎûë
        else if (absD >= 0.2) return 'rgba(255, 193, 7, 0.8)';  // ÏûëÏùÄ Ìö®Í≥º - ÎÖ∏Îûë
        else return 'rgba(108, 117, 125, 0.8)';                  // Ìö®Í≥º ÏóÜÏùå - ÌöåÏÉâ
    });
    
    charts.effectSize = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: areaNames,
            datasets: [{
                label: "Cohen's d (Ìö®Í≥ºÌÅ¨Í∏∞)",
                data: effectSizes,
                backgroundColor: colors,
                borderColor: colors.map(color => color.replace('0.8', '1')),
                borderWidth: 2,
                borderRadius: 8
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: 'ÏòÅÏó≠Î≥Ñ Ìö®Í≥ºÌÅ¨Í∏∞ (Cohen\'s d)',
                    font: { size: 18, weight: 'bold' },
                    padding: 20
                },
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        afterLabel: function(context) {
                            const d = context.parsed.y;
                            const absD = Math.abs(d);
                            let interpretation = '';
                            if (absD >= 0.8) interpretation = 'ÌÅ∞ Ìö®Í≥º';
                            else if (absD >= 0.5) interpretation = 'Ï§ëÍ∞Ñ Ìö®Í≥º';
                            else if (absD >= 0.2) interpretation = 'ÏûëÏùÄ Ìö®Í≥º';
                            else interpretation = 'Ìö®Í≥º ÏóÜÏùå';
                            return `Ìï¥ÏÑù: ${interpretation}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    title: {
                        display: true,
                        text: 'Cohen\'s d',
                        font: { size: 14, weight: 'bold' }
                    },
                    grid: { color: 'rgba(0,0,0,0.1)' }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Ï∏°Ï†ï ÏòÅÏó≠',
                        font: { size: 14, weight: 'bold' }
                    }
                }
            },
            animation: {
                duration: 2000,
                easing: 'easeOutBounce'
            }
        }
    });
}

// Í∞úÎ≥Ñ ÌïôÏÉù Î≥ÄÌôî Ï∞®Ìä∏
function createIndividualChangeChart() {
    const ctx = document.getElementById('individualChart');
    if (!ctx) return;
    
    const data = collectData();
    if (data.length === 0) return;
    
    // Í∞úÎ≥Ñ ÌïôÏÉùÏùò Ï¥ù Ìñ•ÏÉÅÎèÑ Í≥ÑÏÇ∞
    const improvements = data.map((student, index) => ({
        label: `ÌïôÏÉù${index + 1}`,
        total: (student.a_post - student.a_pre) + 
               (student.b_post - student.b_pre) + 
               (student.c_post - student.c_pre),
        a: student.a_post - student.a_pre,
        b: student.b_post - student.b_pre,
        c: student.c_post - student.c_pre
    }));
    
    // Ï¥ù Ìñ•ÏÉÅÎèÑÏàúÏúºÎ°ú Ï†ïÎ†¨
    improvements.sort((a, b) => b.total - a.total);
    
    charts.individual = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: improvements.map(item => item.label),
            datasets: [
                {
                    label: 'AÏòÅÏó≠ Ìñ•ÏÉÅ',
                    data: improvements.map(item => item.a),
                    backgroundColor: 'rgba(255, 99, 132, 0.7)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                },
                {
                    label: 'BÏòÅÏó≠ Ìñ•ÏÉÅ',
                    data: improvements.map(item => item.b),
                    backgroundColor: 'rgba(54, 162, 235, 0.7)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                },
                {
                    label: 'CÏòÅÏó≠ Ìñ•ÏÉÅ',
                    data: improvements.map(item => item.c),
                    backgroundColor: 'rgba(75, 192, 192, 0.7)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: 'Í∞úÎ≥Ñ ÌïôÏÉù ÏòÅÏó≠Î≥Ñ Ìñ•ÏÉÅÎèÑ',
                    font: { size: 18, weight: 'bold' },
                    padding: 20
                },
                legend: {
                    position: 'top',
                    labels: { font: { size: 12 } }
                }
            },
            scales: {
                x: {
                    stacked: true,
                    title: {
                        display: true,
                        text: 'ÌïôÏÉù (Ìñ•ÏÉÅÎèÑ ÎÜíÏùÄ Ïàú)',
                        font: { size: 14, weight: 'bold' }
                    }
                },
                y: {
                    stacked: true,
                    title: {
                        display: true,
                        text: 'Ï†êÏàò Ìñ•ÏÉÅ',
                        font: { size: 14, weight: 'bold' }
                    },
                    grid: { color: 'rgba(0,0,0,0.1)' }
                }
            },
            animation: {
                duration: 1000,
                easing: 'easeInOutQuad'
            }
        }
    });
}

// Part 4A ÌÖåÏä§Ìä∏ Ìï®Ïàò
function testPart4A() {
    console.log('üéØ Part 4A (Ï∞®Ìä∏ ÏÉùÏÑ±) Ìï®ÏàòÎì§ Î°úÎìú ÏôÑÎ£å!');
    
    const functions = {
        createCharts: typeof createCharts,
        createBeforeAfterChart: typeof createBeforeAfterChart,
        createEffectSizeChart: typeof createEffectSizeChart,
        createIndividualChangeChart: typeof createIndividualChangeChart,
        destroyExistingCharts: typeof destroyExistingCharts
    };
    
    console.log('Part 4A Ìï®Ïàò ÌôïÏù∏:', functions);
    return functions;
}

console.log('üìà Part 4A JavaScript Î°úÎìú ÏôÑÎ£å!');
</script>

<script>
// ========================================
// Part 4B: Î≥¥Í≥†ÏÑú ÏÉùÏÑ± Í¥ÄÎ†® JavaScript Ìï®ÏàòÎì§
// ========================================

// Î≥¥Í≥†ÏÑú ÏÉùÏÑ± Î©îÏù∏ Ìï®Ïàò
function generateReport() {
    if (!analysisResults || Object.keys(analysisResults).length === 0) {
        console.warn('Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.');
        return;
    }
    
    const reportContent = document.getElementById('report-content');
    const detailedReport = document.getElementById('detailed-report');
    
    if (!reportContent || !detailedReport) return;
    
    // ÏöîÏïΩ Î≥¥Í≥†ÏÑú
    const summaryHTML = generateSummaryReport();
    reportContent.innerHTML = summaryHTML;
    
    // ÏÉÅÏÑ∏ Î≥¥Í≥†ÏÑú
    const detailedHTML = generateDetailedReport();
    detailedReport.innerHTML = detailedHTML;
    detailedReport.style.display = 'block';
    
    console.log('Î≥¥Í≥†ÏÑú ÏÉùÏÑ± ÏôÑÎ£å');
}

// ÏöîÏïΩ Î≥¥Í≥†ÏÑú ÏÉùÏÑ±
function generateSummaryReport() {
    const n = analysisResults.a.n;
    const grade = currentGrade === 'elementary' ? 'Ï¥àÎì±ÌïôÍµê 5ÌïôÎÖÑ' : 'Ï§ëÌïôÍµê 2ÌïôÎÖÑ';
    
    const significantCount = ['a', 'b', 'c'].filter(area => 
        analysisResults[area].tTest.significant
    ).length;
    
    const largeEffectCount = ['a', 'b', 'c'].filter(area => 
        Math.abs(analysisResults[area].cohenD) >= 0.8
    ).length;
    
    const avgSatisfaction = analysisResults.e.mean;
    
    return `
        <div class="alert alert-success">
            <h4>üèÜ Ïó∞Íµ¨ Í≤∞Í≥º ÏöîÏïΩ</h4>
            <p><strong>Ïó∞Íµ¨ ÎåÄÏÉÅ:</strong> ${grade} ${n}Î™Ö</p>
            <p><strong>Ïú†ÏùòÌïú Ìö®Í≥º:</strong> ${significantCount}/3Í∞ú ÏòÅÏó≠ÏóêÏÑú ÌÜµÍ≥ÑÏ†ÅÏúºÎ°ú Ïú†ÏùòÌïú Ìñ•ÏÉÅ</p>
            <p><strong>ÌÅ∞ Ìö®Í≥ºÌÅ¨Í∏∞:</strong> ${largeEffectCount}/3Í∞ú ÏòÅÏó≠ÏóêÏÑú Cohen's d ‚â• 0.8</p>
            <p><strong>Ïã§Ìóò ÎßåÏ°±ÎèÑ:</strong> ${avgSatisfaction.toFixed(1)}/5.0Ï†ê (${avgSatisfaction >= 4.0 ? 'Îß§Ïö∞ ÎÜíÏùå' : 'ÎÜíÏùå'})</p>
            
       ${(() => {
    let resultMessage = '';
    if (significantCount === 3 && largeEffectCount >= 2) {
        resultMessage = 'üéØ Ï†Ñ ÏòÅÏó≠ ÌÜµÍ≥ÑÏ†Å Ïú†ÏùòÏÑ± Îã¨ÏÑ±! ÌÉÅÏõîÌïú ÍµêÏú° Ìö®Í≥º!<br>üìä ÌÅ∞ Ìö®Í≥ºÌÅ¨Í∏∞ Îã§Ïàò ÏòÅÏó≠ÏóêÏÑú ÌôïÏù∏!<br>üî¨ Í≥ºÌïôÍµêÏú° ÌòÅÏã†Ïóê ÌÅ¨Í≤å Í∏∞Ïó¨Ìï† Ïàò ÏûàÎäî Ïó∞Íµ¨!';
    } else if (significantCount >= 2 && largeEffectCount >= 1) {
        resultMessage = 'üìà 2/3Í∞ú ÏòÅÏó≠ÏóêÏÑú ÌÜµÍ≥ÑÏ†Å Ïú†ÏùòÏÑ± ÌôïÏù∏!<br>üìä Ïã§ÌóòÏû•ÏπòÏùò ÍµêÏú°Ï†Å Ìö®Í≥ºÏÑ± ÏûÖÏ¶ù!<br>üî¨ Í≥ºÌïôÍµêÏú° Í∞úÏÑ†Ïóê Í∏∞Ïó¨Ìï† Ïàò ÏûàÎäî Í≤∞Í≥º!<br>üìä ÌÅ∞ Ìö®Í≥ºÌÅ¨Í∏∞(d‚â•0.8) Îã¨ÏÑ±!';
    } else if (significantCount >= 1) {
        resultMessage = 'üìä ÏùºÎ∂Ä ÏòÅÏó≠ÏóêÏÑú ÍµêÏú° Ìö®Í≥º ÌôïÏù∏<br>üîç Ï∂îÍ∞Ä Í∞úÏÑ†ÏùÑ ÌÜµÌïú Ìö®Í≥º Ìñ•ÏÉÅ Í∞ÄÎä•ÏÑ±';
    } else {
        resultMessage = 'üìã Ïã§ÌóòÏû•Ïπò Í∞úÏÑ†ÏùÑ ÌÜµÌïú Ìö®Í≥º Ìñ•ÏÉÅ ÌïÑÏöî<br>üîß Ï∂îÍ∞Ä Ïó∞Íµ¨ Î∞è Î≥¥ÏôÑ Î∞©Ìñ• ÎèÑÏ∂ú';
    }
    return resultMessage ? `<p style="color: #28a745; font-weight: bold; margin-top: 10px;">${resultMessage}</p>` : '';
})()}
        </div>
        
        <h4>üìä ÏòÅÏó≠Î≥Ñ Ï£ºÏöî Í≤∞Í≥º</h4>
        <table class="data-table">
            <thead>
                <tr>
                    <th>ÏòÅÏó≠</th>
                    <th>ÏÇ¨Ï†Ñ ÌèâÍ∑†</th>
                    <th>ÏÇ¨ÌõÑ ÌèâÍ∑†</th>
                    <th>Ìñ•ÏÉÅÎèÑ</th>
                    <th>Ìö®Í≥ºÌÅ¨Í∏∞</th>
                    <th>Ïú†ÏùòÏÑ±</th>
                </tr>
            </thead>
            <tbody>
                ${['a', 'b', 'c'].map(area => {
                    const result = analysisResults[area];
                    const areaName = area === 'a' ? 'ÏßÄÏãù¬∑Ïù¥Ìï¥' : area === 'b' ? 'Í≥ºÏ†ï¬∑Í∏∞Îä•' : 'Í∞ÄÏπò¬∑ÌÉúÎèÑ';
                    return `
                        <tr>
                            <td>${areaName}</td>
                            <td>${result.pre_mean.toFixed(2)}</td>
                            <td>${result.post_mean.toFixed(2)}</td>
                            <td>+${result.improvement.toFixed(2)} (${result.improvementPercent.toFixed(1)}%)</td>
                            <td>${result.cohenD.toFixed(3)} (${result.effectSize.label})</td>
                            <td>${result.tTest.significant ? '‚úÖ p<0.05' : '‚ùå n.s.'}</td>
                        </tr>
                    `;
                }).join('')}
            </tbody>
        </table>
    `;
}

// ÏÉÅÏÑ∏ Î≥¥Í≥†ÏÑú ÏÉùÏÑ±
function generateDetailedReport() {
    const grade = currentGrade === 'elementary' ? 'Ï¥àÎì±ÌïôÍµê 5ÌïôÎÖÑ' : 'Ï§ëÌïôÍµê 2ÌïôÎÖÑ';
    const date = new Date().toLocaleDateString('ko-KR');
    
    return `
        <div class="result-card" style="margin-top: 20px;">
            <h3>üìã ÏÉÅÏÑ∏ Ïó∞Íµ¨ Î≥¥Í≥†ÏÑú</h3>
            
            <h4>1. Ïó∞Íµ¨ Í∞úÏöî</h4>
            <p><strong>Ïó∞Íµ¨ Ï†úÎ™©:</strong> ÌïôÏÉùÏ£ºÎèÑÌòï ÏÜåÎ¶¨ ÌäπÏÑ± Ïã§ÌóòÏû•ÏπòÏùò ÍµêÏú° Ìö®Í≥º Í≤ÄÏ¶ù</p>
            <p><strong>Ïó∞Íµ¨ ÎåÄÏÉÅ:</strong> ${grade} ${analysisResults.a.n}Î™Ö</p>
            <p><strong>Î∂ÑÏÑù ÏùºÏãú:</strong> ${date}</p>
            <p><strong>Ïó∞Íµ¨ ÏÑ§Í≥Ñ:</strong> ÏÇ¨Ï†Ñ-ÏÇ¨ÌõÑ Ï§ÄÏã§ÌóòÏÑ§Í≥Ñ (One-group pretest-posttest design)</p>
            
            <h4>2. Ï∏°Ï†ï ÎèÑÍµ¨</h4>
            <ul>
                <li><strong>AÏòÅÏó≠ (ÏßÄÏãù¬∑Ïù¥Ìï¥):</strong> Ïò§Í∞úÎÖê ÏßÑÎã® Î∞è Í≥ºÌïô Í∞úÎÖê Ïù¥Ìï¥ÎèÑ (${currentGrade === 'elementary' ? '5' : '6'}Ï†ê ÎßåÏ†ê)</li>
                <li><strong>BÏòÅÏó≠ (Í≥ºÏ†ï¬∑Í∏∞Îä•):</strong> Í≥ÑÎüâÏ†Å ÏÇ¨Í≥† Î∞è Í≥ºÌïôÏ†Å ÌÉêÍµ¨ Í∏∞Îä• (${currentGrade === 'elementary' ? '4' : '5'}Ï†ê ÎßåÏ†ê)</li>
                <li><strong>CÏòÅÏó≠ (Í∞ÄÏπò¬∑ÌÉúÎèÑ):</strong> Í≥ºÌïôÏóê ÎåÄÌïú Ìù•ÎØ∏ Î∞è ÌÉêÍµ¨ ÏùòÏöï (5Ï†ê Ï≤ôÎèÑ)</li>
                <li><strong>EÏòÅÏó≠ (Ï≤¥Ìóò ÌèâÍ∞Ä):</strong> Ïã§ÌóòÏû•ÏπòÏóê ÎåÄÌïú ÎßåÏ°±ÎèÑ Î∞è Ìö®Í≥ºÏÑ± (5Ï†ê Ï≤ôÎèÑ)</li>
            </ul>
            
            <h4>3. ÌÜµÍ≥Ñ Î∂ÑÏÑù Í≤∞Í≥º</h4>
            ${['a', 'b', 'c'].map(area => {
                const result = analysisResults[area];
                const areaName = area === 'a' ? 'ÏßÄÏãù¬∑Ïù¥Ìï¥' : area === 'b' ? 'Í≥ºÏ†ï¬∑Í∏∞Îä•' : 'Í∞ÄÏπò¬∑ÌÉúÎèÑ';
                return `
                    <h5>3.${['a', 'b', 'c'].indexOf(area) + 1} ${areaName} ÏòÅÏó≠</h5>
                    <ul>
                        <li>ÏÇ¨Ï†ÑÍ≤ÄÏÇ¨: M = ${result.pre_mean.toFixed(2)}, SD = ${result.pre_sd.toFixed(2)}</li>
                        <li>ÏÇ¨ÌõÑÍ≤ÄÏÇ¨: M = ${result.post_mean.toFixed(2)}, SD = ${result.post_sd.toFixed(2)}</li>
                        <li>ÎåÄÏùëÌëúÎ≥∏ t-Í≤ÄÏ†ï: t(${result.tTest.df}) = ${result.tTest.tStat.toFixed(3)}, p ${result.tTest.pValue < 0.001 ? '< 0.001' : '= ' + result.tTest.pValue.toFixed(3)}</li>
                        <li>Ìö®Í≥ºÌÅ¨Í∏∞: Cohen's d = ${result.cohenD.toFixed(3)} (${result.effectSize.label})</li>
                        <li>Ìñ•ÏÉÅÏú®: ${result.improvementPercent.toFixed(1)}%</li>
                    </ul>
                `;
            }).join('')}
            
            <h4>4. Ïã§Ìóò Ï≤¥Ìóò ÌèâÍ∞Ä (EÏòÅÏó≠)</h4>
            <ul>
                <li>ÌèâÍ∑† ÎßåÏ°±ÎèÑ: M = ${analysisResults.e.mean.toFixed(2)}, SD = ${analysisResults.e.sd.toFixed(2)}</li>
                <li>ÏùºÌëúÎ≥∏ t-Í≤ÄÏ†ï (Í∏∞Ï§ÄÍ∞í 3.0): t(${analysisResults.e.oneSampleTest.df}) = ${analysisResults.e.oneSampleTest.tStat.toFixed(3)}</li>
                <li>Ìï¥ÏÑù: ${analysisResults.e.mean >= 4.0 ? 'Îß§Ïö∞ ÎÜíÏùÄ ÎßåÏ°±ÎèÑ' : 'ÎÜíÏùÄ ÎßåÏ°±ÎèÑ'}</li>
            </ul>
            
            <h4>5. Í≤∞Î°† Î∞è ÏùòÏùò</h4>
            <ul>
                <li>Í∞úÎ∞úÎêú Ïã§ÌóòÏû•ÏπòÎäî ${['a', 'b', 'c'].filter(a => analysisResults[a].tTest.significant).length}/3Í∞ú ÏòÅÏó≠ÏóêÏÑú ÌÜµÍ≥ÑÏ†ÅÏúºÎ°ú Ïú†ÏùòÌïú ÍµêÏú° Ìö®Í≥ºÎ•º Î≥¥ÏûÑ</li>
                <li>ÌäπÌûà ${['a', 'b', 'c'].filter(a => Math.abs(analysisResults[a].cohenD) >= 0.8).map(a => a === 'a' ? 'ÏßÄÏãù¬∑Ïù¥Ìï¥' : a === 'b' ? 'Í≥ºÏ†ï¬∑Í∏∞Îä•' : 'Í∞ÄÏπò¬∑ÌÉúÎèÑ').join(', ')} ÏòÅÏó≠ÏóêÏÑú ÌÅ∞ Ìö®Í≥ºÌÅ¨Í∏∞Î•º ÎÇòÌÉÄÎÉÑ</li>
                <li>ÌïôÏÉùÎì§Ïùò Ïã§Ìóò Ï≤¥Ìóò ÎßåÏ°±ÎèÑÍ∞Ä Îß§Ïö∞ ÎÜíÏïÑ Ïã§Ï†ú ÍµêÏú°ÌòÑÏû• Ï†ÅÏö© Í∞ÄÎä•ÏÑ±Ïù¥ ÎÜíÏùå</li>
                <li>2022 Í∞úÏ†ï ÍµêÏú°Í≥ºÏ†ïÏùò Í≥ºÌïôÍ≥º ÌïµÏã¨Ïó≠Îüâ Ìï®ÏñëÏóê Ìö®Í≥ºÏ†ÅÏù∏ ÍµêÏú°ÎèÑÍµ¨Î°ú ÌåêÎã®Îê®</li>
            </ul>
            
            <h4>6. Ïó∞Íµ¨Ïùò Ï†úÌïúÏ†ê</h4>
            <ul>
                <li>Îã®Ïùº ÏßëÎã® ÏÇ¨Ï†Ñ-ÏÇ¨ÌõÑ ÏÑ§Í≥ÑÎ°ú Ïù∏Ìïú ÎÇ¥Ï†Å ÌÉÄÎãπÎèÑ Ï†úÏïΩ</li>
                <li>ÌëúÎ≥∏ ÌÅ¨Í∏∞ÏôÄ ÎåÄÏÉÅ ÌïôÍµêÏùò Ï†úÌïú</li>
                <li>Ïû•Í∏∞Ï†Å ÌïôÏäµ Ìö®Í≥ºÏóê ÎåÄÌïú Ï∂îÏ†Å Ïó∞Íµ¨ ÌïÑÏöî</li>
            </ul>
        </div>
    `;
}

// CSV ÎÇ¥Î≥¥ÎÇ¥Í∏∞ Ìï®Ïàò
function exportToCSV() {
    const data = collectData();
    if (data.length === 0) {
        alert('ÎÇ¥Î≥¥ÎÇº Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
        return;
    }
    
    // CSV Ìó§Îçî
    const headers = [
        'ÌïôÏÉùID', 'ÏÑ±Î≥Ñ', 'AÏòÅÏó≠_ÏÇ¨Ï†Ñ', 'AÏòÅÏó≠_ÏÇ¨ÌõÑ', 'AÏòÅÏó≠_Ìñ•ÏÉÅ',
        'BÏòÅÏó≠_ÏÇ¨Ï†Ñ', 'BÏòÅÏó≠_ÏÇ¨ÌõÑ', 'BÏòÅÏó≠_Ìñ•ÏÉÅ',
        'CÏòÅÏó≠_ÏÇ¨Ï†Ñ', 'CÏòÅÏó≠_ÏÇ¨ÌõÑ', 'CÏòÅÏó≠_Ìñ•ÏÉÅ',
        'EÏòÅÏó≠_ÌèâÍ∑†', 'Ï¥ù_Ìñ•ÏÉÅÎèÑ'
    ];
    
    // CSV Îç∞Ïù¥ÌÑ∞
    const csvData = data.map(student => [
        student.id,
        student.gender,
        student.a_pre,
        student.a_post,
        student.a_post - student.a_pre,
        student.b_pre,
        student.b_post,
        student.b_post - student.b_pre,
        student.c_pre,
        student.c_post,
        student.c_post - student.c_pre,
        student.e_avg,
        (student.a_post - student.a_pre) + (student.b_post - student.b_pre) + (student.c_post - student.c_pre)
    ]);
    
    // CSV Î¨∏ÏûêÏó¥ ÏÉùÏÑ±
    const csvContent = [headers, ...csvData]
        .map(row => row.join(','))
        .join('\n');
    
    // ÌååÏùº Îã§Ïö¥Î°úÎìú
    const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement('a');
    const url = URL.createObjectURL(blob);
    link.setAttribute('href', url);
    link.setAttribute('download', `Ïã§ÌóòÏû•Ïπò_Î∂ÑÏÑùÍ≤∞Í≥º_${new Date().toISOString().slice(0, 10)}.csv`);
    link.style.visibility = 'hidden';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    
    console.log('CSV ÌååÏùº Îã§Ïö¥Î°úÎìú ÏôÑÎ£å');
}

// Î≥¥Í≥†ÏÑú Ïù∏ÏáÑ Ìï®Ïàò
function printReport() {
    const reportContent = document.getElementById('report-content').innerHTML;
    const detailedContent = document.getElementById('detailed-report').innerHTML;
    
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
        <html>
        <head>
            <title>Ïã§ÌóòÏû•Ïπò ÍµêÏú° Ìö®Í≥º Î∂ÑÏÑù Î≥¥Í≥†ÏÑú</title>
            <style>
                body { font-family: 'Malgun Gothic', Arial, sans-serif; margin: 20px; }
                .alert { padding: 15px; border-radius: 5px; margin: 15px 0; }
                .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
                .data-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                .data-table th, .data-table td { border: 1px solid #dee2e6; padding: 12px; text-align: center; }
                .data-table th { background: #007bff; color: white; }
                h3, h4, h5 { color: #2c3e50; }
                @media print { body { margin: 0; } }
            </style>
        </head>
        <body>
            <h1>ÌïôÏÉùÏ£ºÎèÑÌòï ÏÜåÎ¶¨ ÌäπÏÑ± Ïã§ÌóòÏû•Ïπò ÍµêÏú° Ìö®Í≥º Î∂ÑÏÑù Î≥¥Í≥†ÏÑú</h1>
            <p>ÏÉùÏÑ±Ïùº: ${new Date().toLocaleDateString('ko-KR')}</p>
            <hr>
            ${reportContent}
            ${detailedContent}
        </body>
        </html>
    `);
    
    printWindow.document.close();
    printWindow.print();
}

// Í≤∞Í≥º Î≥µÏÇ¨ Ìï®Ïàò
function copyResults() {
    const summary = generateTextSummary();
    
    if (navigator.clipboard) {
        navigator.clipboard.writeText(summary).then(() => {
            alert('Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!');
        });
    } else {
        // Ìè¥Î∞±: ÌÖçÏä§Ìä∏ ÏòÅÏó≠ ÏÉùÏÑ±ÌïòÏó¨ Î≥µÏÇ¨
        const textArea = document.createElement('textarea');
        textArea.value = summary;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!');
    }
}

// ÌÖçÏä§Ìä∏ ÏöîÏïΩ ÏÉùÏÑ±
function generateTextSummary() {
    const n = analysisResults.a.n;
    const grade = currentGrade === 'elementary' ? 'Ï¥àÎì±ÌïôÍµê 5ÌïôÎÖÑ' : 'Ï§ëÌïôÍµê 2ÌïôÎÖÑ';
    
    return `
ÌïôÏÉùÏ£ºÎèÑÌòï ÏÜåÎ¶¨ ÌäπÏÑ± Ïã§ÌóòÏû•Ïπò ÍµêÏú° Ìö®Í≥º Î∂ÑÏÑù Í≤∞Í≥º

Ïó∞Íµ¨ ÎåÄÏÉÅ: ${grade} ${n}Î™Ö
Î∂ÑÏÑù ÏùºÏãú: ${new Date().toLocaleDateString('ko-KR')}

== ÏòÅÏó≠Î≥Ñ Î∂ÑÏÑù Í≤∞Í≥º ==
${['a', 'b', 'c'].map(area => {
    const result = analysisResults[area];
    const areaName = area === 'a' ? 'AÏòÅÏó≠(ÏßÄÏãù¬∑Ïù¥Ìï¥)' : area === 'b' ? 'BÏòÅÏó≠(Í≥ºÏ†ï¬∑Í∏∞Îä•)' : 'CÏòÅÏó≠(Í∞ÄÏπò¬∑ÌÉúÎèÑ)';
    return `
${areaName}:
- ÏÇ¨Ï†Ñ: ${result.pre_mean.toFixed(2)} ¬± ${result.pre_sd.toFixed(2)}
- ÏÇ¨ÌõÑ: ${result.post_mean.toFixed(2)} ¬± ${result.post_sd.toFixed(2)}
- Ìñ•ÏÉÅ: +${result.improvement.toFixed(2)}Ï†ê (${result.improvementPercent.toFixed(1)}%)
- ÌÜµÍ≥Ñ: t(${result.tTest.df}) = ${result.tTest.tStat.toFixed(3)}, p ${result.tTest.pValue < 0.001 ? '<0.001' : '=' + result.tTest.pValue.toFixed(3)}
- Ìö®Í≥ºÌÅ¨Í∏∞: d = ${result.cohenD.toFixed(3)} (${result.effectSize.label})
`;
}).join('')}

Ïã§Ìóò Ï≤¥Ìóò ÌèâÍ∞Ä: ${analysisResults.e.mean.toFixed(2)}/5.0Ï†ê

Í≤∞Î°†: ${['a', 'b', 'c'].filter(a => analysisResults[a].tTest.significant).length}/3Í∞ú ÏòÅÏó≠ÏóêÏÑú Ïú†ÏùòÌïú Ìö®Í≥º, ${['a', 'b', 'c'].filter(a => Math.abs(analysisResults[a].cohenD) >= 0.8).length}Í∞ú ÏòÅÏó≠ÏóêÏÑú ÌÅ∞ Ìö®Í≥ºÌÅ¨Í∏∞
    `.trim();
}

// Part 4B ÌÖåÏä§Ìä∏ Ìï®Ïàò
function testPart4B() {
    console.log('üéØ Part 4B (Î≥¥Í≥†ÏÑú ÏÉùÏÑ±) Ìï®ÏàòÎì§ Î°úÎìú ÏôÑÎ£å!');
    
    const functions = {
        generateReport: typeof generateReport,
        generateSummaryReport: typeof generateSummaryReport,
        generateDetailedReport: typeof generateDetailedReport,
        exportToCSV: typeof exportToCSV,
        printReport: typeof printReport,
        copyResults: typeof copyResults,
        generateTextSummary: typeof generateTextSummary
    };
    
    console.log('Part 4B Ìï®Ïàò ÌôïÏù∏:', functions);
    return functions;
}

// Part 4B Î°úÎìú ÏôÑÎ£å Ïãú ÏûêÎèô Ïã§Ìñâ
if (typeof document !== 'undefined') {
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof testPart4B === 'function') {
            testPart4B();
        }
    });
}

console.log('üìã Part 4B JavaScript Î°úÎìú ÏôÑÎ£å!');

// ========================================
// Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî Î∞è ÌÜµÌï© ÌÖåÏä§Ìä∏ Ìï®Ïàò
// ========================================

// Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú ÌÖåÏä§Ìä∏ Ìï®Ïàò
function testFullSystem() {
    console.log('üöÄ Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú ÌÖåÏä§Ìä∏ ÏãúÏûë!');
    
    const results = {
        part1: typeof showTab !== 'undefined',
        part2: typeof addStudent !== 'undefined',
        part3: typeof calculateResults !== 'undefined',
        part4a: typeof createCharts !== 'undefined',
        part4b: typeof generateReport !== 'undefined'
    };
    
    const allLoaded = Object.values(results).every(Boolean);
    
    console.log('ÌååÌä∏Î≥Ñ Î°úÎìú ÏÉÅÌÉú:', results);
    console.log('Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú ÏÉÅÌÉú:', allLoaded ? '‚úÖ ÏôÑÎ£å' : '‚ùå Î∂àÏôÑÏ†Ñ');
    
    if (allLoaded) {
        console.log('üéâ Î™®Îì† Í∏∞Îä•Ïù¥ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');
        console.log('üí° ÏÇ¨Ïö©Î≤ï:');
        console.log('1. ÌïôÍ∏â ÏÑ†ÌÉù (Ï¥à5/Ï§ë2)');
        console.log('2. ÌïôÏÉù Ï∂îÍ∞Ä ÎòêÎäî ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Î°úÎìú');
        console.log('3. Î∂ÑÏÑù Ïã§Ìñâ Î≤ÑÌäº ÌÅ¥Î¶≠');
        console.log('4. Í≤∞Í≥º ÌôïÏù∏ Î∞è Î≥¥Í≥†ÏÑú ÏÉùÏÑ±');
    } else {
        console.log('‚ö†Ô∏è ÏùºÎ∂Ä Í∏∞Îä•Ïù¥ Î°úÎìúÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§. ÌååÌä∏Î≥Ñ ÏΩîÎìúÎ•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
    }
    
    return { results, allLoaded };
}

// DOM Î°úÎìú ÏôÑÎ£å Ïãú Ï†ÑÏ≤¥ ÌÖåÏä§Ìä∏ Ïã§Ìñâ
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(testFullSystem, 1000); // 1Ï¥à ÌõÑ ÌÖåÏä§Ìä∏ Ïã§Ìñâ
});

console.log('üéØ Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú Ï§ÄÎπÑ ÏôÑÎ£å!');
</script>



</body>
</html>